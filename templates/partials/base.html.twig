{% set extension = config.theme.production ? '.min' : '' %}

<!DOCTYPE html>
<html lang="{{ (grav.language.getActive ?: grav.config.site.default_lang)|e }}" data-theme="{% block theme %}garden{% endblock %}">

	<head>
		{% block head %}
			<meta charset="utf-8"/>
			<title>
				{% if header.title %}
					{{ header.title|e }}
					|
				{% endif %}
				{{ site.title|e }}</title>

			<meta http-equiv="X-UA-Compatible" content="IE=edge">
			<meta name="viewport" content="width=device-width, initial-scale=1">
			{% include 'partials/metadata.html.twig' %}

			<link rel="icon" type="image/png" href="{{ url('theme://images/logo.png')|e }}"/>
			<link rel="canonical" href="{{ page.url(true, true)|e }}"/>
		{% endblock head %}

		{% block stylesheets %}
			{% do assets.addCss('theme://css/tailwind'~extension~'.css', 98) %}
		{% endblock %}

		{% block javascripts %}{% endblock %}

		{% block assets deferred %}
			{{ assets.css()|raw }}
			{{ assets.js()|raw }}
		{% endblock %}
	</head>

	<body id="top" class="drawer drawer-end {{ config.theme.production ?: 'debug-screens' }}">
		<input id="menu-drawer" type="checkbox" class="drawer-toggle">
		<div class="drawer-content">

			{% block header %}

				{% set header_image = page.header.image ? page.media.images[page.header.image] : page.media.images|first %}

				<header class="bg-neutral bg-blend-overlay bg-hero-topography">

					<div class="navbar mb-2 shadow-lg text-neutral-content">
						<div class="px-2 mx-2 navbar-start">
							<a href="/">
								{{ svg('theme://svg/logo.svg', 'fill-current w-10 h-10')|raw }}
							</a>
						</div>
						<nav class="hidden px-2 mx-2 navbar-center lg:flex">
							<ul class="flex items-stretch space-x-2">
								{% for page in pages.children.visible %}
									{% set current_page = (page.active or page.activeChild) ? 'btn-active' : '' %}
									<li>
										<a href="{{ page.url|e }}" class="btn btn-ghost btn-sm rounded-btn {{ current_page|e }}">
											{% if page.header.icon %}
												{{ svg('theme://svg/icon/'~page.header.icon~'.svg', 'icon w-5 mr-1')|raw }}
											{% endif %}
											<span>{{ page.menu|e }}</span>
										</a>
									</li>
								{% endfor %}
							</ul>
						</nav>
						<div class="navbar-end">
							<label for="menu-drawer" class="btn btn-square btn-ghost drawer-button">
								{{ svg('theme://svg/icon/menu-right.svg','icon w-8')|raw }}
							</label>
						</div>

					</div>

					{% block header_content %}
						<div class="text-center py-16">
							<h1 class="text-6xl md:text-7xl font-black text-neutral-content">{{ page.title }}</h1>
						</div>
					{% endblock %}

					<div class="container mx-auto mb-12">
						{% include 'partials/breadcrumbs.html.twig' %}
					</div>

				</header>

			{% endblock %}

			{% block body %}
				<main id="body">
					<div class="px-4 my-16">
						{% block content %}{% endblock %}
					</div>
				</main>
			{% endblock %}

			{% block footer %}

				<footer class="p-10 footer bg-base-200 text-base-content">
					<div>
						{{ svg('theme://svg/logo.svg', 'fill-current w-12 h-12 text-neutral-content')|raw }}
						<p class="text-lg">{{ config.site.title}}</p>
						<p>&copy;
							{{ "now"|date("Y") }}</p>
					</div>
					<div>
						<span class="footer-title">Jungschar</span>
						{% for page in pages.children.ofOneOfTheseTypes(['sections','chronicle']) %}
							{% set current_page = (page.active or page.activeChild) ? 'link-primary' : '' %}
							<a href="{{ page.url|e }}" class="flex space-x-1 items-center link link-hover {{ current_page|e }}">
								{% if page.header.icon %}
									{{ svg('theme://svg/icon/'~page.header.icon~'.svg', 'icon w-5 mr-1')|raw }}
								{% endif %}
								{{ page.menu|e }}
							</a>
						{% endfor %}
					</div>
					<div>
						<span class="footer-title">Gruppen</span>
						{% for page in pages.children.ofType('group') %}
							{% set current_page = (page.active or page.activeChild) ? 'link-primary' : '' %}
							<a href="{{ page.url|e }}" class="flex space-x-1 items-center link link-hover {{ current_page|e }}">
								{% if page.header.icon %}
									{{ svg('theme://svg/icon/'~page.header.icon~'.svg', 'icon w-5 mr-1')|raw }}
								{% endif %}
								{{ page.menu|e }}
							</a>
						{% endfor %}
					</div>
					<div>
						<span class="footer-title">Sonstiges</span>
						{% for page in pages.children.ofType('page') %}
							{% set current_page = (page.active or page.activeChild) ? 'link-primary' : '' %}
							<a href="{{ page.url|e }}" class="flex space-x-1 items-center link link-hover {{ current_page|e }}">
								{% if page.header.icon %}
									{{ svg('theme://svg/icon/'~page.header.icon~'.svg', 'icon w-5 mr-1')|raw }}
								{% endif %}
								{{ page.menu|e }}
							</a>
						{% endfor %}
					</div>
					<div>
						<span class="footer-title">Netzwerke</span>
						<div class="grid grid-flow-col gap-4">
							<a>
								{{ svg('theme://svg/icon/instagram.svg', 'icon w-8')|raw }}
							</a>
							<a>
								{{ svg('theme://svg/icon/youtube.svg', 'icon w-8')|raw }}
							</a>
						</div>
					</div>
				</footer>
			{% endblock %}

		</div>

		<div class="drawer-side">
			<label for="menu-drawer" class="drawer-overlay"></label>
			<ul class="menu p-4 overflow-y-auto w-80 bg-base-100 text-base-content space-y-2">
				<li class="menu-title">
					<span>
						Allgemein
					</span>
				</li>
				{% for page in pages.children.visible.ofOneOfTheseTypes(['sections','chronicle']) %}
					{% set current_page = (page.active or page.activeChild) ? 'active' : '' %}
					<li>
						<a href="{{ page.url|e }}" class="{{ current_page|e }}">
							{% if page.header.icon %}
								{{ svg('theme://svg/icon/'~page.header.icon~'.svg', 'icon w-6 mr-1')|raw }}
							{% endif %}
							{{ page.menu|e }}
						</a>
					</li>
				{% endfor %}
				<li class="menu-title mt-6">
					<span>
						Gruppen
					</span>
				</li>
				{% for page in pages.children.ofType('group') %}
					{% set current_page = (page.active or page.activeChild) ? 'active' : '' %}
					<li>
						<a href="{{ page.url|e }}" class="{{ current_page|e }}">
							{% if page.header.icon %}
								{{ svg('theme://svg/icon/'~page.header.icon~'.svg', 'icon w-6 mr-1')|raw }}
							{% endif %}
							{{ page.menu|e }}
						</a>
					</li>
				{% endfor %}
			</ul>
		</div>

		{% block bottom %}
			{{ assets.js('bottom')|raw }}
		{% endblock %}

	</body>
</html>
