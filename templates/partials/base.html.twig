{% set extension = config.theme.production ? '.min' : '' %}

<!DOCTYPE html>
<html lang="{{ (grav.language.getActive ?: grav.config.site.default_lang)|e }}" data-theme="{% block theme %}garden{% endblock %}">

	<head>
		{% block head %}
			<meta charset="utf-8"/>
			<title>
				{% if header.title %}
					{{ header.title|e }}
					|
				{% endif %}
				{{ site.title|e }}</title>

			<meta http-equiv="X-UA-Compatible" content="IE=edge">
			<meta name="viewport" content="width=device-width, initial-scale=1">
			{% include 'partials/metadata.html.twig' %}

			<link rel="icon" type="image/png" href="{{ url('theme://images/logo.png')|e }}"/>
			<link rel="canonical" href="{{ page.url(true, true)|e }}"/>
		{% endblock head %}

		{% block stylesheets %}
			{% do assets.addCss('theme://css/tailwind'~extension~'.css', 98) %}
		{% endblock %}

		{% block javascripts %}{% endblock %}

		{% block assets deferred %}
			{{ assets.css()|raw }}
			{{ assets.js()|raw }}
		{% endblock %}
	</head>

	<body id="top" class="drawer drawer-end {{ config.theme.production ?: 'debug-screens' }}">
		<input id="menu-drawer" type="checkbox" class="drawer-toggle">
		<div class="drawer-content">

			{% block header %}

				<header class="bg-neutral {{ page.header.image ? 'bg-cover' : 'bg-hero-topography bg-blend-overlay'}}" {{ page.header.image ? 'style="background-image: url('~page.header.image.resize(2560,1440).url~');"'}}>

					<div class="navbar mb-2 shadow-lg text-neutral-content">
						<div class="px-2 mx-2 navbar-start">
							<a href="/">
								{{ svg('theme://svg/logo.svg', 'fill-current w-10 h-10')|raw }}
							</a>
						</div>
						<nav class="px-2 mx-2 navbar-end">
							<ul class="hidden lg:flex items-stretch flex-shrink-0 space-x-2">
								{% for page in pages.children.visible %}
									{% set current_page = (page.active or page.activeChild) ? 'btn-active' : '' %}
									<li>
										<a href="{{ page.url|e }}" class="btn btn-ghost btn-sm rounded-btn {{ current_page|e }}">
											{% if page.header.icon %}
												{{ svg('theme://svg/icon/'~page.header.icon~'.svg', 'icon w-5 mr-1')|raw }}
											{% endif %}
											<span>{{ page.menu|e }}</span>
										</a>
									</li>
								{% endfor %}
							</ul>
							<label for="menu-drawer" class="btn btn-square btn-ghost drawer-button lg:hidden">
								{{ svg('theme://svg/icon/menu-right.svg','icon w-8')|raw }}
							</label>
						</nav>
					</div>

					{% block header_content %}
						<div class="text-center py-16">
							<h1 class="text-6xl md:text-7xl font-black text-neutral-content">{{ page.title }}</h1>
						</div>
					{% endblock %}

					{% if page.header.svg %}
						<div class="flex justify-center -mt-24 mb-24 md:-mt-32 md:mb-32">
							{{ svg('theme://svg/'~page.header.svg~'.svg','w-48 md:w-64 transform translate-y-1/2')|raw }}
						</div>
					{% endif %}
				</header>

			{% endblock %}

			{% block body %}
				<main id="body">
					<div class="px-4 py-16">
						{% block content %}{% endblock %}
					</div>
				</main>
			{% endblock %}

			{% block footer %}

				<footer class="p-10 footer bg-base-200 text-base-content">

					<div class="max-w-xs prose-sm">
						<blockquote>
							Macht euch daher um nichts Sorgen! Wendet euch vielmehr in jeder Lage mit Bitten und Flehen und voll Dankbarkeit an Gott und bringt eure Anliegen vor ihn.
							<br>
							<em>Philipper 4,6 NGÜ</em>
						</blockquote>
					</div>

					{% include 'partials/menu-footer.html.twig'  with { title: 'Allgmein', pages: pages.children.ofOneOfTheseTypes(['sections','chronicle']) } %}
					{% include 'partials/menu-footer.html.twig'  with { title: 'Gruppen', pages: pages.children.ofType('group') } %}
					{% include 'partials/menu-footer.html.twig'  with { title: 'Sonstiges', pages: pages.children.ofType('page') } %}

				</footer>

				<footer class="px-10 py-4 border-t footer bg-base-200 text-base-content border-base-300">
					<div class="items-center grid-flow-col">
						{{ svg('theme://svg/logo.svg', 'fill-current w-10 h-10 text-neutral-content')|raw }}
						<div class="ml-2">&copy;
							{{ "now"|date("Y") }}
							{{ config.site.title}}<br><span class="text-light">Aktivitäten für Kinder und Jugendliche</span>
						</div>
					</div>
					<div class="md:place-self-center md:justify-self-end">
						<div class="grid grid-flow-col gap-4">
							{% if config.theme.social %}
								{% for item in config.theme.social %}
									<a href="{{ item.url }}" title="{{title}}">
										{{ svg('theme://svg/icon/'~item.icon~'.svg', 'icon w-8')|raw }}
									</a>
								{% endfor %}
							{% endif %}
						</div>
					</div>
				</footer>

			{% endblock %}

		</div>

		<div class="drawer-side">
			<label for="menu-drawer" class="drawer-overlay"></label>
			<div class="p-4 overflow-y-auto w-72 bg-base-200 text-base-content space-y-2">
				{{ svg('theme://svg/jsek.svg','w-32 mx-auto mb-4')|raw }}
				{% embed 'embeds/card-drawer.html.twig' %}
					{% set title = 'Navigation' %}
					{% block content %}
						{% include 'partials/menu-aside.html.twig' with { pages: pages.children.ofOneOfTheseTypes(['sections','chronicle','group']) } %}
					{% endblock %}
				{% endembed %}
				{% block drawer %}{% endblock %}
			</div>
		</div>

		{% block bottom %}
			{{ assets.js('bottom')|raw }}
		{% endblock %}

	</body>
</html>
